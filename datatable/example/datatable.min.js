jQuery.fn.extend({pusakaDatatable:function(o){function a(t){return this.obj=t,this.item=function(t){return void 0!==this.obj[t]?this.obj[t]:""},this.json=function(){return this.obj},this}var u=$(this);o.tbody=void 0!==o.tbody?o.tbody:"",o.thead=void 0!==o.thead?o.thead:"",o.current=1,o.total=0,o.count=0,o.keysearch="",o.advsearch={};try{u.find("thead").html(o.thead())}catch(t){}return o.fetch=function(){var t="",e=new FormData;try{t=o.url}catch(t){}e.set("current",o.current.toString()),""!==o.keysearch.toString()&&e.set("keysearch",o.keysearch.toString()),Object.keys(o.advsearch).forEach(function(t,r){e.set("search["+t+"]",o.advsearch[t])}),$.ajax({type:"POST",data:e,url:t,processData:!1,contentType:!1,success:function(t,r,e){if(console.log(t.status),2e3!=t.status)if(1e3!=t.status);else for(o.current=Number(t.current),o.total=Number(t.total),o.count=Number(t.count),u.find('[action="countrows"]').html(t.count.toString()),u.find('[action="pageinfo"]').html(t.current.toString()+"/"+t.total.toString()),u.find("tbody").html(""),i=0,c=t.rows.length;i<c;i++){var n=o.tbody(new a(t.rows[i]));u.find("tbody").append(n)}},error:function(t,r,e){console.log(t)}})},u.find('[action="prev"]').click(function(){o.current=Number(o.current),o.current<=1||(o.current-=1,o.fetch())}),u.find('[action="next"]').click(function(){o.current=Number(o.current),o.current>=o.total||(o.current+=1,o.fetch())}),u.find('[action="search"]').change(function(){o.current=Number(o.current),o.current=1,o.keysearch=$(this).val().toString(),o.fetch()}),u.find('[action="advsearch"]').change(function(){o.current=Number(o.current),o.current=1;try{var t=$(this).val().toString(),r=$(this).attr("name").toString();""!==t?o.advsearch[r]=t:delete o.advsearch[r],o.fetch()}catch(t){console.log(t)}}),o}});