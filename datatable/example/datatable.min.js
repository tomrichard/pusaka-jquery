jQuery.fn.extend({pusakaDatatable:function(t){var r=$(this),e=function(t){return this.obj=t,this.item=function(t){return void 0!==this.obj[t]?this.obj[t]:""},this.json=function(){return this.obj},this};t.tbody=void 0!==t.tbody?t.tbody:"",t.thead=void 0!==t.thead?t.thead:"",t.current=1,t.total=0,t.count=0,t.keysearch="",t.advsearch={};try{r.find("thead").html(t.thead())}catch(t){}return t.fetch=function(){var n="",o=new FormData;try{n=t.url}catch(t){}o.set("current",t.current.toString()),""!==t.keysearch.toString()&&o.set("keysearch",t.keysearch.toString()),Object.keys(t.advsearch).forEach(function(r,e){o.set("search["+r+"]",t.advsearch[r])}),$.ajax({type:"POST",data:o,url:n,processData:!1,contentType:!1,success:function(n,o,a){if(console.log(n.status),2e3!=n.status)if(1e3!=n.status);else for(t.current=Number(n.current),t.total=Number(n.total),t.count=Number(n.count),r.find('[action="countrows"]').html(n.count.toString()),r.find('[action="pageinfo"]').html(n.current.toString()+"/"+n.total.toString()),r.find("tbody").html(""),i=0,c=n.rows.length;i<c;i++){var u=t.tbody(new e(n.rows[i]));r.find("tbody").append(u)}},error:function(t,r,e){console.log(t)}})},r.find('[action="prev"]').click(function(){t.current=Number(t.current),t.current<=1||(t.current-=1,t.fetch())}),r.find('[action="next"]').click(function(){t.current=Number(t.current),t.current>=t.total||(t.current+=1,t.fetch())}),r.find('[action="search"]').change(function(){t.current=Number(t.current),t.current=1,t.keysearch=$(this).val().toString(),t.fetch()}),r.find('[action="advsearch"]').change(function(){t.current=Number(t.current),t.current=1;try{var r=$(this).val().toString(),e=$(this).attr("name").toString();""!==r?t.advsearch[e]=r:delete t.advsearch[e],t.fetch()}catch(t){console.log(t)}}),t}});