jQuery.fn.extend({pusakaDatatable:function(a){function o(t){return this.obj=t,this.item=function(t){return void 0!==this.obj[t]?this.obj[t]:""},this}var u=$(this);a.tbody=void 0!==a.tbody?a.tbody:"",a.thead=void 0!==a.thead?a.thead:"",a.current=1,a.total=0,a.count=0,a.keysearch="",a.advsearch={};try{u.find("thead").html(a.thead())}catch(t){}return a.fetch=function(){var t="",e=new FormData;try{t=a.url}catch(t){}e.set("current",a.current.toString()),""!==a.keysearch.toString()&&e.set("keysearch",a.keysearch.toString()),Object.keys(a.advsearch).forEach(function(t,r){e.set("search["+t+"]",a.advsearch[t])}),$.ajax({type:"POST",data:e,url:t,processData:!1,contentType:!1,success:function(t,r,e){if(console.log(t.status),2e3!=t.status)if(1e3!=t.status);else for(a.current=Number(t.current),a.total=Number(t.total),a.count=Number(t.count),u.find('[action="countrows"]').html(t.count.toString()),u.find('[action="pageinfo"]').html(t.current.toString()+"/"+t.total.toString()),u.find("tbody").html(""),i=0,c=t.rows.length;i<c;i++){var n=a.tbody(new o(t.rows[i]));u.find("tbody").append(n)}},error:function(t,r,e){console.log(t)}})},u.find('[action="prev"]').click(function(){a.current=Number(a.current),a.current<=1||(a.current-=1,a.fetch())}),u.find('[action="next"]').click(function(){a.current=Number(a.current),a.current>=a.total||(a.current+=1,a.fetch())}),u.find('[action="search"]').change(function(){a.current=Number(a.current),a.current=1,a.keysearch=$(this).val().toString(),a.fetch()}),u.find('[action="advsearch"]').change(function(){a.current=Number(a.current),a.current=1;try{var t=$(this).val().toString(),r=$(this).attr("name").toString();""!==t?a.advsearch[r]=t:delete a.advsearch[r],a.fetch()}catch(t){console.log(t)}}),a}});